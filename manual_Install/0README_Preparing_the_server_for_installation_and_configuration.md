# Подготовка сервера для установки и настройки WireGuard

## Содержание

1. [Обзор](#обзор)
2. [Подключение к серверу](#подключение-к-серверу)
3. [Обновление системы](#обновление-системы)
4. [Установка необходимых пакетов](#установка-необходимых-пакетов)
5. [Следующие шаги](#следующие-шаги)

## Обзор

Данный документ описывает предварительные шаги, необходимые для настройки VPN-сервера на базе WireGuard. Эти шаги являются общими для всех последующих руководств и должны быть выполнены в первую очередь.

## Подключение к серверу

Для начала необходимо подключиться к серверу по SSH:

```bash
ssh root@<ip адрес сервера>
```

> **Примечание:** Эта команда устанавливает защищенное соединение с вашим сервером. Замените `<ip адрес сервера>` на реальный IP-адрес вашего сервера. При первом подключении вам может быть предложено подтвердить подлинность сервера, на что следует ответить "yes".

Если вы используете приватный ключ для подключения, команда выглядит так:

```bash
ssh -i путь_к_ключу root@<ip адрес сервера>
```

> **Примечание:** Опция `-i` указывает путь к файлу приватного SSH-ключа. Замените `путь_к_ключу` на полный путь к вашему файлу ключа (например, `~/.ssh/id_rsa` или `/path/to/your/key.pem`). Использование ключей вместо паролей повышает безопасность и удобство при подключении к серверу.

## Обновление системы

Перед установкой любых компонентов рекомендуется обновить систему до последних версий:

```bash
apt-get update -y && apt-get full-upgrade -y && apt install sudo && reboot
```

> **Примечание:** Эта команда выполняет последовательно несколько действий: `apt-get update` обновляет списки доступных пакетов, `apt-get full-upgrade -y` устанавливает все доступные обновления с автоматическим подтверждением, `apt install sudo` устанавливает утилиту sudo для выполнения команд с правами суперпользователя, а `reboot` перезагружает сервер для применения всех обновлений. После выполнения команды сервер будет перезагружен. Подождите несколько минут и подключитесь заново.

## Установка необходимых пакетов

### Базовые пакеты для WireGuard

```bash
sudo apt install wireguard wireguard-tools iptables -y
```

> **Примечание:** Эта команда устанавливает основные компоненты для работы с WireGuard: `wireguard` - основной модуль ядра для работы VPN, `wireguard-tools` - набор инструментов командной строки для управления WireGuard, `iptables` - утилита для настройки межсетевого экрана. Флаг `-y` обеспечивает автоматическое подтверждение установки пакетов без дополнительных вопросов.

### Пакеты для WGDashboard

```bash
sudo apt install python3 python3-pip python3-venv git net-tools -y
```

> **Примечание:** Устанавливаются необходимые компоненты для работы веб-интерфейса WGDashboard: `python3` - интерпретатор языка Python, `python3-pip` - система управления пакетами Python, `python3-venv` - инструмент для создания изолированных окружений Python, `git` - система контроля версий для скачивания кода, `net-tools` - набор сетевых утилит, включая ifconfig и netstat, для диагностики сети.

### Пакеты для Wstunnel (обфускация трафика)

```bash
sudo apt install curl -y
```

> **Примечание:** Команда устанавливает утилиту `curl`, которая используется для загрузки файлов и выполнения HTTP-запросов. Она понадобится для скачивания программы Wstunnel, которая маскирует трафик WireGuard под обычный веб-трафик для обхода блокировок.

## Следующие шаги

После выполнения подготовительных шагов из этого руководства, вы можете переходить к:

1. [Изменению имен сетевых интерфейсов](1README_Change_Default_Network_Name_(ens33_ens3_ens18)_to_eth0.md) (опционально)
2. [Настройке файрвола](2README_Configuring_the_firewall.md)
3. [Установке WireGuard](3README_WireGuard_install.md)
4. [Установке WGDashboard](4README_WGDashboard_install.md) (веб-интерфейс для управления)
5. [Настройке обфускации трафика](5README_Wstunnel_Obfuscation.md) (для обхода блокировок) 